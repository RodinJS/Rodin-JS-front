<div class="page__wrapper">
    <div class="main-container development-container">
        <div class="main-title-wrapper">
            <h1 class="main-title">Build/<i class="icon icon-lock"></i><span class="user-name text-white">{{$ctrl.project.name}}</span>
            </h1>
        </div>
        <div class="page-content">
            <div class="content-navbar">
                <ul class="navbar-list">
                    <editor-navigation data-projectid="$ctrl.project._id"></editor-navigation>
                </ul>
            </div>
            <div class="section-wrapper">
                <h2 class="section-title">Publish project</h2>
                <div ng-show="$ctrl.project.publishDate">
                    <p class="description">Your project is published on
                    <a class="text-yellow" href="{{$ctrl.project.publishedUrl}}">{{$ctrl.project.publishedUrl}}</a></p>
                    <p class="description">Last publish at {{$ctrl.project.publishDate | date: 'MMMM dd yyyy. h:mm:ss a'}}</p>
                    <div class="margin-top-40">
                        <button class="btn btn-primary" ng-click="$ctrl.modals.updateVersion = true;">Update Version</button>
                        <button class="btn btn-primary" ng-click="$ctrl.getRollBackData()">Rollback Version</button>
                        <button class="btn btn-primary" ng-click="$ctrl.modals.unpublish = true;">Unpublish</button>
                    </div>
                </div>
                <div ng-hide="$ctrl.project.publishDate">
                    <p class="description">This project is not published yet.</p>
                    <div class="margin-top-40">
                        <button class="btn btn-primary" ng-click="$ctrl.publish()">Publish</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="loader" data-ng-if="$ctrl.showLoader"></div>
</div>

<div class="modal" close-modal="updateVersion" ng-click="$ctrl.modals.updateVersion = false" ng-class="{'display-block': $ctrl.modals.updateVersion, 'display-none': !$ctrl.modals.updateVersion}">
    <div class="modal-content">
        <span class="close" data-ng-click="$ctrl.modals.updateVersion = false"> ×</span>
        <div class="modal-header">
            <h1>Warning</h1>
        </div>
        <div class="modal-body padding-0-important">
            <p class="description">
                You are about to update published project to the current project version. Previous version will be lost. <br>
                Are you sure you want to continue?
            </p>
        </div>
        <div class="modal-footer padding-bottom-40-important">
            <div class="required-field-actions clearfix">
                <button class="btn btn-primary"
                        data-ng-click="$ctrl.update()">Update</button>
                <a href="" class="btn btn-save"
                   data-ng-click="$ctrl.modals.updateVersion = false">cancel</a>
            </div>
        </div>
    </div>
</div>

<div class="modal" close-modal="rollBack" ng-click="$ctrl.modals.rollBack = false" ng-class="{'display-block': $ctrl.modals.rollBack, 'display-none': !$ctrl.modals.rollBack}">
    <div class="modal-content">
        <span class="close" data-ng-click="$ctrl.modals.rollBack = false"> ×</span>
        <div class="modal-header">
            <h1>Roll back </h1>
        </div>
        <div class="modal-body padding-0-important">
            <p class="description">
                Select which saved date version you want to rollback
            </p>
            <div class="form-group select-group">
                <select class="form-control" ng-model="$ctrl.rollBackDate">
                    <option ng-repeat="rollBackDate in $ctrl.rollbackDates" value="{{rollBackDate.origin}}">{{rollBackDate.formated}}</option>
                </select>
            </div>
        </div>
        <div class="modal-footer padding-bottom-40-important">
            <div class="required-field-actions clearfix">
                <button class="btn btn-primary"
                        data-ng-click="$ctrl.rollback($ctrl.rollBackDate)">Roll back</button>
                <a href="" class="btn btn-save"
                   data-ng-click="$ctrl.modals.rollBack = false">cancel</a>
            </div>
        </div>
    </div>
</div>

<div class="modal" close-modal="unpublish"  ng-class="{'display-block': $ctrl.modals.unpublish, 'display-none': !$ctrl.modals.unpublish}">
    <div class="modal-content">
        <span class="close" data-ng-click="$ctrl.modals.unpublish = false"> ×</span>
        <div class="modal-header">
            <h1>Warning</h1>
        </div>
        <div class="modal-body padding-0-important">
            <p class="description">
                Your project will no longer be available on
                <span class="text-yellow">{{$ctrl.project.publishedUrl}}</span>, your apps for
                <span class="text-yellow">"{{$ctrl.project.name}}"</span> will stop working !<br>
                Are you sure you want to continue?
            </p>
        </div>
        <div class="modal-footer padding-bottom-40-important">
            <div class="required-field-actions clearfix">
                <button class="btn btn-primary"
                        data-ng-click="$ctrl.unpublish()">Unpublish</button>
                <a href="" class="btn btn-save"
                   data-ng-click="$ctrl.modals.unpublish = false">cancel</a>
            </div>
        </div>
    </div>
</div>
