<div class="page__wrapper">

	<div class="main-container account-settings-container">
		<h1 class="main-title">
			Account Settings
			<!-- <a href="" class="btn-upgrade text-action">
                <i class="icon icon-glasses-bold"></i>UPGRADE YOUR PLAN
            </a> -->
		</h1>
		<div class="page-content">
			<div class="content-navbar">
				<ul class="navbar-list">
					<li class=""><a ui-sref="app.profile">Profile</a>
					</li>
					<li class="active"><a ui-sref="app.plans">Plans</a>
					</li>
					<li class=""><a ui-sref="app.billing">Billing</a>
					</li>
					<li class=""><a href="#">Integrations</a>
					</li>
					<li class=""><a href="#">Billing Tools</a>
					</li>
					<li class=""><a ui-sref="app.purchases">Purchases</a>
					</li>
				</ul>
			</div>
			<div class="section-wrapper section-plan-wrapper">
				<div class="content-title-wrapper">
					<h1 class="main-title">Let’s get you on the right plan!</h1>
					<p class="description text-small">You’re currently on the Free plan — upgrade, downgrade or cancel at any time.</p>
				</div>

				<div class="plan-content-wrapper">

					<div class="plan-content">

						<div ng-repeat="plan in $ctrl.plans" class="plan-content-item-box">
							<div class="plan-content-item">
								<i ng-class="plan.icon"></i>
								<h2>{{plan.title}}</h2>
								<p class="text-small">{{plan.description}}</p>
								<ul class="plan-item-info-list">
									<li class="text-primary"  ng-repeat="feature in plan.features">{{feature}}</li>
								</ul>
								<div class="plan-price-wrapper">
									<span class="price">
										<sup>{{plan.price.currency}}</sup>{{plan.price.month}}<sub>/mo</sub>
									</span>
								</div>

								<div ng-if="$ctrl.currentPlan == plan.id">
									<div class="btn-wrapper">
										<a href="" ng-if="plan.id == 'Free'" class="btn btn-current">Current Plan</a>
										<a href="" ng-if="plan.id != 'Free'" ng-click="$ctrl.unsubscribe()" class="btn btn-primary">Unsubscribe</a>
									</div>
								</div>

								<div ng-if="$ctrl.currentPlan != plan.id">
									<div class="btn-wrapper">
										<a href="" class="btn btn-primary" ng-click="$ctrl.openSubscription(plan.id)">
											{{$ctrl.subscription ? 'Change plan' : 'Subscribe'}}
										</a>
									</div>
								</div>
							</div>
						</div>

					</div>

				</div>
			</div>
		</div>
	</div>

</div>


<div class="modal stripeWrapper" ng-class="{'display-block': $ctrl.modals.subscribe, 'display-none': !$ctrl.modals.subscribe}">
	<div class="modal-content" style="max-width:50%">
		<div class="modal-header">
			<span class="close" data-ng-click="$ctrl.modals.subscribe = false">×</span>
			<h1>Select card for subscription</h1>
		</div>
		<div class="modal-body">
			<ul class="list-group" style="color:#000">
				<li class="list-group-item row" ng-repeat="(index, card) in $ctrl.customerCards">
					<div class="col-md-2 col-sm-2 col-sx-2">
						<i class="fa fa-cc-{{card.brand}} fa-2x" aria-hidden="true"></i>
					</div>
					<div class="col-md-3 col-sm-3 col-sx-3">
						<h4>**** {{card.last4}}</h4>
					</div>
					<div class="col-md-3 col-sm-3 col-sx-3">
						<h4>{{card.exp_month}}/{{card.exp_year}}</h4>
					</div>
					<div class="col-sm-3 col-sx-3 col-md-3 col-sm-offset-1 col-sx-offset-1 col-md-offset-1 text-right">
						<input type="radio" style="margin-top:10px" ng-model="$ctrl.selectedCard" ng-value="card">
					</div>
				</li>
			</ul>
		</div>
		<div class="modal-footer padding-bottom-20-important">
			<div class="required-field-actions clearfix">
				<button type="button" ng-disabled="!$ctrl.selectedCard" class="btn btn-primary" data-ng-click="$ctrl.startSubscription()">Subscribe</button>
				<a href="" class="btn btn-save" data-ng-click="$ctrl.modals.subscribe = false">cancel</a>
			</div>
		</div>
	</div>
</div>
